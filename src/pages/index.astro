---
import BaseLayout from "../layouts/BaseLayout.astro";

const title = "Relicta — AI-powered release management";
const description = "Relicta is an AI-powered release management CLI that automates versioning, release notes, approvals, and publishing.";

const getLatestVersion = async () => {
  try {
    const res = await fetch("https://api.github.com/repos/relicta-tech/relicta/releases/latest", {
      headers: { "User-Agent": "relicta-site" },
    });
    if (!res.ok) throw new Error(`GitHub responded ${res.status}`);
    const json = await res.json();
    return json.tag_name || "v2.1.0";
  } catch (err) {
    return "v2.1.0";
  }
};

const version = await getLatestVersion();
---
<BaseLayout {title} {description}>
  <header class="top-bar">
    <div class="brand">
      <div class="brand-logos">
        <img src="/brand/relicta-logo-light.svg" alt="Relicta" class="brand-mark logo-light" />
        <img src="/brand/relicta-logo-dark.svg" alt="Relicta" class="brand-mark logo-dark" />
      </div>
    </div>
    <button class="menu-toggle" type="button" aria-label="Toggle navigation menu" aria-expanded="false" data-menu-toggle>
      <span class="menu-icon"></span>
    </button>
    <nav class="nav" id="main-nav">
      <a href="#features">Features</a>
      <a href="#plugins">Plugins</a>
      <a href="#how-it-works">How It Works</a>
      <a href="https://docs.relicta.tech" target="_blank" rel="noopener">Docs</a>
      <a href="#install">Install</a>
      <a href="https://github.com/relicta-tech/relicta" target="_blank" rel="noopener">GitHub</a>
    </nav>
    <div class="cta">
      <button class="theme-toggle" type="button" data-theme-toggle aria-pressed="false">Toggle theme</button>
      <a class="btn ghost" href="https://github.com/relicta-tech/relicta/releases/latest">Download</a>
      <a class="btn solid" href="https://github.com/relicta-tech/relicta-action" target="_blank" rel="noopener">Use in CI</a>
    </div>
  </header>
  <script>
    // Mobile menu toggle
    document.addEventListener('DOMContentLoaded', () => {
      const toggle = document.querySelector('[data-menu-toggle]');
      const nav = document.getElementById('main-nav');
      const cta = document.querySelector('.top-bar .cta');

      if (!toggle || !nav) return;

      toggle.addEventListener('click', () => {
        const isOpen = toggle.getAttribute('aria-expanded') === 'true';
        toggle.setAttribute('aria-expanded', !isOpen);
        nav.classList.toggle('nav-open', !isOpen);
        cta.classList.toggle('cta-open', !isOpen);
        document.body.classList.toggle('menu-open', !isOpen);
      });

      // Close menu when clicking a nav link
      nav.querySelectorAll('a').forEach(link => {
        link.addEventListener('click', () => {
          toggle.setAttribute('aria-expanded', 'false');
          nav.classList.remove('nav-open');
          cta.classList.remove('cta-open');
          document.body.classList.remove('menu-open');
        });
      });
    });
  </script>

  <main id="main">
    <section class="hero">
      <div class="hero-text">
        <p class="eyebrow">AI-powered release management</p>
        <h1>Ship clean releases without the release-day scramble</h1>
        <p class="lede">Relicta reads your commits, calculates the right semantic version, writes polished notes, and publishes across your channels. One CLI for the entire release workflow.</p>
        <div class="hero-actions">
          <a class="btn solid" href="#install">Get the CLI</a>
          <a class="btn ghost" href="https://github.com/relicta-tech/relicta" target="_blank" rel="noopener">View on GitHub</a>
        </div>
        <div class="hero-meta">
          <span>Latest CLI: {version}</span>
          <span class="divider">•</span>
          <span>20 official plugins for GitHub, npm, Docker, PyPI, and more</span>
          <span class="divider">•</span>
          <span>Supports OpenAI, Anthropic, Gemini, Azure, Ollama</span>
        </div>
      </div>
      <div class="hero-card">
        <div class="terminal">
          <img src="/demos/marketing.gif" alt="Relicta CLI run showing plan, notes, and publish steps" loading="lazy" />
        </div>
        <div class="card-foot">Designed for modern teams that care about release quality.</div>
      </div>
    </section>

    <!-- Stakeholders: Moved up for business value early in journey -->
    <section class="section stakeholders reveal">
      <div class="section-heading">
        <p class="eyebrow">For stakeholders</p>
        <h2>Less release risk, more confidence</h2>
        <p class="lede">Relicta shortens release prep, reduces hotfixes, and keeps an audit trail so leadership and compliance teams stay aligned.</p>
      </div>
      <div class="stakeholder-grid">
        <div class="card">
          <h3>Business outcomes</h3>
          <ul>
            <li>Predictable release cadence with fewer fire drills</li>
            <li>Consistent changelogs for customers and internal teams</li>
            <li>Lower engineer toil; more time for features</li>
          </ul>
        </div>
        <div class="card">
          <h3>Trust & safety</h3>
          <ul>
            <li>Audit-friendly approval step with recorded decisions</li>
            <li>Uses your AI keys; nothing stored server-side</li>
            <li>Open source (MIT); transparent build artifacts</li>
          </ul>
        </div>
        <div class="card">
          <h3>Need a demo?</h3>
          <p>Security review or SLA? Talk to us.</p>
          <div class="hero-actions" style="margin-top: 12px;">
            <a class="btn solid" href="mailto:hello@relicta.tech">Book a demo</a>
            <a class="btn ghost" href="https://docs.relicta.tech" target="_blank" rel="noopener">Read the docs</a>
          </div>
        </div>
      </div>
    </section>

    <section id="features" class="section grid reveal">
      <div class="section-heading">
        <p class="eyebrow">Why teams choose Relicta</p>
        <h2>Automate the boring parts, keep humans in control</h2>
        <p class="lede">Relicta combines conventional commits, AI summaries, and an approval flow so you can ship confidently every time.</p>
        <div class="feature-list">
          <div>
            <h4>Core workflow</h4>
            <ul>
              <li>Semantic versioning from conventional commits</li>
              <li>AI-generated notes with tone control</li>
              <li>Approval gate before publishing</li>
              <li>Dry runs to preview changes safely</li>
            </ul>
          </div>
          <div>
            <h4>Integrations</h4>
            <ul>
              <li>20 official plugins: GitHub, GitLab, npm, PyPI, Docker, Homebrew, and more</li>
              <li>Supports OpenAI, Anthropic, Gemini, Azure, Ollama</li>
              <li>GitHub Action for zero-install CI</li>
              <li>Extensible via gRPC plugin SDK</li>
            </ul>
          </div>
        </div>
      </div>
      <div class="feature-cards">
        <article class="card">
          <h3>Automatic versioning</h3>
          <p>Relicta reads your history and calculates the correct semantic version, including prereleases and build metadata.</p>
        </article>
        <article class="card">
          <h3>AI-grade release notes</h3>
          <p>Generate polished notes with your preferred AI provider (OpenAI, Anthropic, Gemini, Azure, Ollama) and keep them consistent.</p>
        </article>
        <article class="card">
          <h3>Pluggable publishing</h3>
          <p>Ship to 20+ targets: GitHub, GitLab, npm, PyPI, Docker, Homebrew, Slack, Teams, and more. Build custom plugins with the gRPC SDK.</p>
        </article>
        <article class="card">
          <h3>Approval workflow</h3>
          <p>Plan, review, and approve before publishing. Dry runs let you see every change without touching your repo.</p>
        </article>
        <article class="card card-featured">
          <span class="card-badge">New in v2.2</span>
          <h3>Change Governance Protocol</h3>
          <p>Built-in risk assessment for AI-assisted workflows. Automatic risk scoring based on blast radius, actor trust, and security impact.</p>
        </article>
        <article class="card">
          <h3>CI-first</h3>
          <p>Use the GitHub Action for zero-install pipelines or run the binary directly. Checksums included for every release.</p>
        </article>
      </div>
    </section>

    <section id="plugins" class="section plugins reveal">
      <div class="section-heading">
        <p class="eyebrow">Ecosystem</p>
        <h2>20 Official Plugins</h2>
        <p class="lede">Publish to every major platform with zero configuration. All plugins are open source and installable via the CLI.</p>
      </div>
      <div class="plugin-grid">
        <div class="plugin-category">
          <h4>Version Control</h4>
          <ul class="plugin-list">
            <li><strong>github</strong> - Create releases &amp; upload assets</li>
            <li><strong>gitlab</strong> - Create GitLab releases</li>
          </ul>
        </div>
        <div class="plugin-category">
          <h4>Notifications</h4>
          <ul class="plugin-list">
            <li><strong>slack</strong> - Slack channel notifications</li>
            <li><strong>discord</strong> - Discord webhook messages</li>
            <li><strong>teams</strong> - Microsoft Teams cards</li>
          </ul>
        </div>
        <div class="plugin-category">
          <h4>Package Managers</h4>
          <ul class="plugin-list">
            <li><strong>npm</strong> - npm registry</li>
            <li><strong>pypi</strong> - Python Package Index</li>
            <li><strong>homebrew</strong> - Homebrew formulas</li>
            <li><strong>chocolatey</strong> - Windows packages</li>
            <li><strong>linuxpkg</strong> - deb, rpm, apk</li>
            <li><strong>crates</strong> - Rust crates.io</li>
            <li><strong>nuget</strong> - .NET packages</li>
            <li><strong>maven</strong> - Maven Central</li>
            <li><strong>rubygems</strong> - Ruby gems</li>
            <li><strong>hex</strong> - Elixir/Erlang Hex.pm</li>
            <li><strong>packagist</strong> - PHP Composer</li>
            <li><strong>gomod</strong> - Go modules</li>
          </ul>
        </div>
        <div class="plugin-category">
          <h4>Project Management</h4>
          <ul class="plugin-list">
            <li><strong>jira</strong> - Jira release versions</li>
            <li><strong>launchnotes</strong> - Customer announcements</li>
          </ul>
        </div>
        <div class="plugin-category">
          <h4>Containers</h4>
          <ul class="plugin-list">
            <li><strong>docker</strong> - Build &amp; push images</li>
          </ul>
        </div>
      </div>
      <div class="plugin-cta">
        <p>Install any plugin with one command:</p>
        <pre><code>relicta plugin install github npm docker slack</code></pre>
        <a class="btn ghost" href="https://docs.relicta.tech/plugins" target="_blank" rel="noopener">View all plugin docs</a>
      </div>
    </section>

    <section id="how-it-works" class="section demo reveal">
      <div class="section-heading">
        <p class="eyebrow">Demo the flow</p>
        <h2>Everything from planning to publishing in one CLI</h2>
        <p class="lede">One command or step-by-step control. The output stays predictable and copy-paste ready.</p>
      </div>
      <div class="demo-grid demo-grid-3">
        <div class="demo-card demo-card-featured">
          <div class="demo-label">One Command (Recommended)</div>
<pre><code><span class="cmd-prompt">$</span> relicta release

<span class="cmd-step">→ Planning...</span>
  ✓ Analyzed 12 commits since v2.5.0
  ✓ Next version: 2.6.0 (minor)

<span class="cmd-step">→ Bumping version...</span>
  ✓ Created tag v2.6.0

<span class="cmd-step">→ Generating notes...</span>
  ✓ AI-powered release notes ready
  ✓ CHANGELOG.md updated

<span class="cmd-step">→ Approving...</span>
  ✓ Risk score: 18% (low)
  ✓ Release approved

<span class="cmd-step">→ Publishing...</span>
  ✓ Tag pushed to origin
  ✓ GitHub release created
  ✓ Slack notification sent

<span class="cmd-success">✨ Released v2.6.0</span></code></pre>
          <p class="demo-note">For CI/CD: <code>relicta release --yes</code></p>
        </div>
        <div class="demo-card">
          <div class="demo-label">Step-by-Step</div>
<pre><code><span class="cmd-prompt">$</span> relicta plan
✓ Detects next version from commits
✓ Shows diff, change types, release type

<span class="cmd-prompt">$</span> relicta bump
✓ Applies version, creates git tag

<span class="cmd-prompt">$</span> relicta notes --ai
✓ Generates release notes + changelog
✓ Uses your preferred AI provider

<span class="cmd-prompt">$</span> relicta approve
✓ Locks the plan with auditability

<span class="cmd-prompt">$</span> relicta publish
✓ Tags repo, runs plugins, posts release</code></pre>
        </div>
        <div class="demo-card">
          <div class="demo-label">GitHub Action</div>
<pre><code>name: Release
on:
  push:
    branches: [main]

jobs:
  release:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: relicta-tech/relicta-action@v2
        with:
          github-token: &#36;&#123;&#123; secrets.GITHUB_TOKEN &#125;&#125;</code></pre>
          <p class="demo-note">Zero-install CI: downloads binary, verifies checksums, runs the full workflow.</p>
        </div>
      </div>
      <p class="demo-docs-link">See the full CI/CD tutorial in our <a href="https://docs.relicta.tech/ci-cd" target="_blank" rel="noopener">documentation</a>.</p>
    </section>

    <!-- See It In Action: Consolidated from Preview + Highlights -->
    <section class="section see-it-in-action reveal">
      <div class="section-heading">
        <p class="eyebrow">Production-ready output</p>
        <h2>Polished releases, every time</h2>
        <p class="lede">From planning to publishing, Relicta keeps your releases consistent and auditable.</p>
      </div>
      <div class="screenshot-grid">
        <figure class="screenshot-card">
          <img src="/brand/relicta-highlight-01.png" alt="Relicta CLI ready for commands" loading="lazy" />
          <figcaption>Minimal CLI ready for your release workflow.</figcaption>
        </figure>
        <figure class="screenshot-card">
          <img src="/brand/relicta-highlight-02.png" alt="Version plan and AI-generated release notes" loading="lazy" />
          <figcaption>Automatic version planning and AI-crafted notes.</figcaption>
        </figure>
        <figure class="screenshot-card">
          <img src="/brand/relicta-highlight-03.png" alt="Publishing with checklist output" loading="lazy" />
          <figcaption>Publish with checklists and audit-friendly output.</figcaption>
        </figure>
      </div>
    </section>

    <section id="install" class="section install reveal">
      <div class="section-heading">
        <p class="eyebrow">Get started fast</p>
        <h2>Install the CLI</h2>
        <p class="lede">Pick your path: Homebrew, direct download, or Go install. From install to first release in under 2 minutes.</p>
      </div>
      <div class="install-grid">
        <div class="install-card">
          <h3>Homebrew</h3>
<pre><code>brew install relicta-tech/tap/relicta</code></pre>
        </div>
        <div class="install-card">
          <h3>Direct download</h3>
<pre><code>curl -L https://github.com/relicta-tech/\
relicta/releases/latest/download/relicta_\
Darwin_aarch64.tar.gz | tar xz
sudo mv relicta_Darwin_aarch64/relicta /usr/local/bin/</code></pre>
        </div>
        <div class="install-card">
          <h3>Go install</h3>
<pre><code>go install github.com/relicta-tech/relicta/cmd/relicta@latest</code></pre>
        </div>
      </div>
    </section>

    <section class="section cta-band reveal-scale">
      <div>
        <h2>Ready to ship your next release?</h2>
        <p class="lede">Install Relicta and keep your releases consistent, auditable, and stress-free.</p>
      </div>
      <div class="hero-actions">
        <a class="btn solid" href="#install">Install the CLI</a>
        <a class="btn ghost" href="https://github.com/relicta-tech/relicta" target="_blank" rel="noopener">Star on GitHub</a>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="brand">
      <div class="brand-logos">
        <img src="/brand/relicta-icon-light.svg" alt="Relicta" class="brand-icon icon-light" />
        <img src="/brand/relicta-icon-dark.svg" alt="Relicta" class="brand-icon icon-dark" />
      </div>
      <span>Relicta — Release management, automated.</span>
    </div>
    <div class="footer-links">
      <a href="https://github.com/relicta-tech/relicta" target="_blank" rel="noopener">CLI Source</a>
      <a href="https://github.com/relicta-tech/relicta-action" target="_blank" rel="noopener">GitHub Action</a>
      <a href="https://docs.relicta.tech" target="_blank" rel="noopener">Docs</a>
    </div>
  </footer>
</BaseLayout>
